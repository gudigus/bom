<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Bookmark">
   <select id="ubmBoardListMapper" parameterType="int" resultType="UserBookmarkBoard">
SELECT  ui.ucode ucode, b.bcontent bcontent, b.blikecount blikecount, ui.uatid uatid, ui.unickname unickname, 
                ui.uimage uimage, b.ucode ucode, b.bcode bcode, b.battach battach,
                lb.ltype ltype, lb.bbtype bbtype, lb.ldate ldate, lb.bdate bdate, b.breplycount breplycount, b.bquotecount bquotecount,
                 case when trunc((sysdate - to_date(b.bregdate,'yy/mm/dd hh24:mi:ss'))/365) >=1 then trunc((sysdate - to_date(b.bregdate,'yy/mm/dd hh24:mi:ss'))/365)||'년 전'
     		when trunc((sysdate - to_date(b.bregdate,'yy/mm/dd hh24:mi:ss'))/31) >=1 then trunc((sysdate - to_date(b.bregdate,'yy/mm/dd hh24:mi:ss'))/31)||'달 전'
     		when trunc((sysdate - to_date(b.bregdate,'yy/mm/dd hh24:mi:ss'))) >=1 then trunc((sysdate - to_date(b.bregdate,'yy/mm/dd hh24:mi:ss')))||'일 전'
     		when trunc((sysdate - to_date(b.bregdate,'yy/mm/dd hh24:mi:ss'))*24) >=1 then trunc((sysdate - to_date(b.bregdate,'yy/mm/dd hh24:mi:ss'))*24)||'시간 전'
     		when trunc((sysdate - to_date(b.bregdate,'yy/mm/dd hh24:mi:ss'))*24*60) >=1 then trunc((sysdate - to_date(b.bregdate,'yy/mm/dd hh24:mi:ss'))*24*60)||'분 전'
     		when trunc((sysdate - to_date(b.bregdate,'yy/mm/dd hh24:mi:ss'))*24*60*60) >=0 then trunc((sysdate - to_date(b.bregdate,'yy/mm/dd hh24:mi:ss'))*24*60*60)||'초 전'
    	  end as bregdate, lb.bdate bdate
       FROM    user_info ui, like_bookmark lb, board b
       WHERE   lb.ucode = #{ucode}
      
       AND	 (  lb.ltype= '1'       OR	    lb.bbtype = '1' )
       AND     lb.bcode = b.bcode
       AND     b.ucode = ui.ucode
      order by lb.bdate desc 

     
   
   </select>
   
   

    <delete id="delete" parameterType="Board">
       delete 
       from like_bookmark 
       where ucode = #{ucode}
       and  bcode = #{bcode}
    
    </delete>

    <delete id="deleteAll" parameterType="String">
      delete
      from like_bookmark
      where ucode = #{ucode}
      
    </delete> 




</mapper>